<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consulter Fiche Frais</title>
    <link rel="stylesheet" href="../css/visiteur.css">
</head>
<body>
    <nav>
        <a href="form.html">Renseigner Fiche Frais</a>
        <a href="hors-frais.html">Renseigner Fiche Hors Frais</a>
        <a href="list.html" class="active">Consulter Fiche Frais</a>
    </nav>

    <div class="container">
        <h2 class="mb-4">Consultation des fiches de frais</h2>
        <div class="card">
            <div class="text-right mb-4">
                <input type="text" placeholder="Rechercher..." class="search-input" style="max-width: 300px;">
                <button class="btn">Filtrer par statut</button>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Période</th>
                        <th>Montant</th>
                        <th>Statut</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Avril 2024</td>
                        <td>1247 €</td>
                        <td><span class="badge badge-green">Validée</span></td>
                        <td><a href="#" class="link details-link">Voir détails</a></td>
                    </tr>
                    <tr>
                        <td>Mars 2024</td>
                        <td>1247 €</td>
                        <td><span class="badge badge-yellow">En attente</span></td>
                        <td><a href="#" class="link details-link">Voir détails</a></td>
                    </tr>
                    <tr>
                        <td>Mars 2024</td>
                        <td>1247 €</td>
                        <td><span class="badge badge-green">Validée</span></td>
                        <td><a href="#" class="link details-link">Voir détails</a></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Side Panel -->
    <div class="side-panel" id="details-panel">
        <div class="side-panel-header">
            <h3>Détails de la fiche - Avril 2024</h3>
            <button class="close-btn">&times;</button>
        </div>
        
        <table class="mb-4">
            <thead>
                <tr>
                    <th>Frais forfaitaires</th>
                    <th>Quantité</th>
                    <th>Prix unitaire</th>
                    <th>Total</th>
                    <th>Validation</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Repas restaurant</td>
                    <td>15</td>
                    <td>29 €</td>
                    <td>354 €</td>
                    <td><span class="badge badge-green">Oui</span></td>
                </tr>
                <tr>
                    <td>Nuitées hôtel</td>
                    <td>10</td>
                    <td>80 €</td>
                    <td>800 €</td>
                    <td><span class="badge badge-red">Non</span></td>
                </tr>
                <tr>
                    <td>Frais kilométriques</td>
                    <td>150</td>
                    <td>0.62 €</td>
                    <td>93 €</td>
                    <td><span class="badge badge-green">Oui</span></td>
                </tr>
            </tbody>
        </table>

        <div class="grid">
            <div class="card">
                <strong>Total frais validés</strong>
                <p>447 €</p>
            </div>
            <div class="card">
                <strong>Total frais en attente</strong>
                <p>800 €</p>
            </div>
            <div class="card">
                <strong>Total général</strong>
                <p>1247 €</p>
            </div>
        </div>
    </div>

    <script>
        // Side panel management
        const detailsPanel = document.getElementById('details-panel');
        const closeBtn = document.querySelector('.close-btn');
        const detailsLinks = document.querySelectorAll('.details-link');

        // Open panel when clicking "Voir détails"
        detailsLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                detailsPanel.classList.add('open');
            });
        });

        // Close panel when clicking the close button
        closeBtn.addEventListener('click', () => {
            detailsPanel.classList.remove('open');
        });

        // Close panel when clicking outside
        document.addEventListener('click', (e) => {
            if (!detailsPanel.contains(e.target) && 
                !e.target.classList.contains('details-link') && 
                detailsPanel.classList.contains('open')) {
                detailsPanel.classList.remove('open');
            }
        });

        // Search functionality
        const searchInput = document.querySelector('.search-input');
        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const rows = document.querySelectorAll('tbody tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        });

        // Prevent panel from closing when clicking inside it
        detailsPanel.addEventListener('click', (e) => {
            e.stopPropagation();
        });
    </script>
</body>
</html>